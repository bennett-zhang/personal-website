script(src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous")
script(src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous")
script(src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous")
script(src="./js/scrolla.jquery.min.js" charset="utf-8")
script(type="text/javascript").
	$(() => {
		const $window = $(window)
		const $layers = $(".parallax-layer:not([data-speed=1])")
		const $animate = $("[class^=col]")
		const $a = $("a")
		const $html_body = $("html, body")

		$window.scroll(evt => {
			const scrollTop = $window.scrollTop()

			for (let i = 0; i < $layers.length; i++) {
				const $layer = $layers.eq(i)
				const speed = $layer.attr("data-speed")
				const y = -scrollTop * speed
				$layer.css("transform", `translate(0, ${y}px)`)
			}
		})

		$animate.attr({
			"data-animate": "jackInTheBox",
			"data-duration": "500"
		}).scrolla()

		$a.click(evt => {
			const hash = evt.target.hash

			if (hash) {
				evt.preventDefault()

				$html_body.animate({
					scrollTop: $(hash).offset().top
				}, 1000)
			}
		})
	})
